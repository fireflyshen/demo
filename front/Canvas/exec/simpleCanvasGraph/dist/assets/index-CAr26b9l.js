var v=Object.defineProperty;var X=(s,t,r)=>t in s?v(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var c=(s,t,r)=>X(s,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();class Y{constructor(t,r,n,e,o=0,i=0,l="skyblue"){c(this,"x");c(this,"y");c(this,"angle");c(this,"opacity");c(this,"endX");c(this,"endY");c(this,"fillColor");this.x=t,this.y=r,this.angle=n,this.opacity=e,this.endX=o,this.endY=i,this.fillColor=l}set EndX(t){this.endX=t}set EndY(t){this.endY=t}get X(){return this.x}get Y(){return this.y}get Width(){return Math.abs(this.endX-this.x)}get Height(){return Math.abs(this.endY-this.y)}}class x extends Y{constructor(t,r,n,e,o=0,i=0){super(t,r,n,e),this.endX=t+o,this.endY=r+i,console.log(this.x,"执行了Rect")}draw(t){t.fillStyle=this.fillColor,t.fillRect(this.X,this.Y,this.Width,this.Height)}}const u=[];function L(){const s=document.querySelector("#graph"),t=document.querySelector("#color");let r=null;if(t&&(t.onchange=n=>{n.target&&(r=n.target.value)}),s){s.style.backgroundColor="#000000";const n=s.getContext("2d");n&&(n.canvas.width=800,n.canvas.height=600);let e=null;s.addEventListener("mousedown",o=>{const i=o.offsetX,l=o.offsetY;e=new x(i,l,0,1),e.fillColor=r||"skyblue";const a=h=>{if(e){const{x:f,y:m,endX:p,endY:g}=M(h,i,l);e.x=f,e.y=m,e.endX=p,e.endY=g,n&&(n.clearRect(0,0,n.canvas.width,n.canvas.height),u.forEach(y=>y.draw(n)),e.draw(n))}},d=()=>{e&&(u.push(e),e=null),s.removeEventListener("mousemove",a),s.removeEventListener("mouseup",d)};s.addEventListener("mousemove",a),s.addEventListener("mouseup",d)})}}function M(s,t,r){const n=s.offsetX,e=s.offsetY,o=Math.min(t,n),i=Math.min(r,e),l=Math.max(t,n),a=Math.max(r,e);return{x:o,y:i,endX:l,endY:a,width:l-o,height:a-i}}window.addEventListener("DOMContentLoaded",()=>{document.querySelector("#app").innerHTML=`
  
    <input type="color" id="color" />
    <canvas id="graph"></canvas>

`,L()});
