(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();const d=300,u=300,c=new Array,b=T(3),f=new Array(9).fill(null);function L(){const e=p("#tictactoe"),o=p("#x"),i=p("#o");let n="X";const t=e.getContext("2d");if(!t)throw new Error("Context not found");e.style.border="1px solid black",v(t),o.addEventListener("change",()=>{n="X"}),i.addEventListener("change",()=>{n="O"}),e.addEventListener("click",r=>{const s=e.getBoundingClientRect(),h=Math.floor(r.clientX-s.left),m=Math.floor(r.clientY-s.top),a=c.find(l=>h>=l.x&&h<=l.x+l.width&&m>=l.y&&m<=l.y+l.height);if(a){if(a.state==="drawed")return;a.state="drawed",t.fillStyle="#000",t.font="30px Arial",t.fillText(`${n}`,a.x+a.width/2-10,a.y+a.height/2+10);const l=a.row*3+a.col;if(f[l]=n,y(f,n)){E(t,y(f,n)),setTimeout(()=>{alert(`${n} wins!`),g(t)},0);return}if(f.every(w=>w!==null)){setTimeout(()=>{alert("Draw!"),g(t)},0);return}}n==="X"?(n="O",o.checked=!1,i.checked=!0):(n="X",o.checked=!0,i.checked=!1)})}function v(e){for(let o=0;o<3;o++)for(let i=0;i<3;i++){const n={x:o*d/3,y:i*u/3,width:d/3,height:u/3,row:o,col:i,state:"empty"};c.push(n)}e.canvas.width=d,e.canvas.height=u,e.strokeStyle="#000",e.beginPath();for(let o=1;o<3;o++)e.moveTo(d/3*o,0),e.lineTo(d/3*o,u);for(let o=1;o<3;o++)e.moveTo(0,u/3*o),e.lineTo(d,u/3*o);e.lineWidth=1,e.stroke(),e.closePath()}function g(e){e.clearRect(0,0,d,u),c.forEach(o=>{o.state="empty"}),f.fill(null),v(e)}function p(e){const o=document.querySelector(e);if(!o)throw new Error(`Element with id ${e} not found`);return o}function T(e){const o=[];for(let t=0;t<e;t++){const r=[];for(let s=0;s<e;s++)r.push(t*e+s);o.push(r)}for(let t=0;t<e;t++){const r=[];for(let s=0;s<e;s++)r.push(s*e+t);o.push(r)}const i=[];for(let t=0;t<e;t++)i.push(t*(e+1));o.push(i);const n=[];for(let t=1;t<=e;t++)n.push(t*(e-1));return o.push(n),o}function y(e,o){return b.find(n=>n.every(t=>e[t]===o))||null}function E(e,o){const[i,,n]=o,t=c[i].x+c[i].width/2,r=c[i].y+c[i].height/2,s=c[n].x+c[n].width/2,h=c[n].y+c[n].height/2;e.beginPath(),e.strokeStyle="red",e.lineWidth=5,e.moveTo(t,r),e.lineTo(s,h),e.stroke(),e.closePath()}document.querySelector("#app").innerHTML=`
<div id="app">
  <div class="game-container">
    <div class="controls">
      <input type="radio" id="x" name="xoro" value="X" checked/>
      <input type="radio" id="o" name="xoro" value="O"/>
    </div>
    <canvas id="tictactoe"></canvas>
  </div>
</div>
`;L();
