(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const d=300,u=300,c=new Array,b=k(3),f=new Array(9).fill(null);function T(){const e=p("#x"),o=p("#o");o.disabled=!0,e.disabled=!0,e.checked=!0;let n="X";const i=p("#tictactoe"),t=i.getContext("2d");if(!t)throw new Error("Context not found");i.style.border="1px solid black",w(t),i.addEventListener("click",r=>{const s=i.getBoundingClientRect(),h=Math.floor(r.clientX-s.left),m=Math.floor(r.clientY-s.top),l=c.find(a=>h>=a.x&&h<=a.x+a.width&&m>=a.y&&m<=a.y+a.height);if(l){if(l.state==="drawed")return;l.state="drawed",t.fillStyle="#000",t.font="30px Arial",t.fillText(`${n}`,l.x+l.width/2-10,l.y+l.height/2+10);const a=l.row*3+l.col;if(f[a]=n,g(f,n)){L(t,g(f,n)),setTimeout(()=>{alert(`${n} wins!`),y(t)},0);return}if(f.every(v=>v!==null)){setTimeout(()=>{alert("Draw!"),y(t)},0);return}n==="X"?(n="O",e.checked=!1,o.checked=!0):(n="X",e.checked=!0,o.checked=!1)}})}function w(e){for(let o=0;o<3;o++)for(let n=0;n<3;n++){const i={x:o*d/3,y:n*u/3,width:d/3,height:u/3,row:o,col:n,state:"empty"};c.push(i)}e.canvas.width=d,e.canvas.height=u,e.strokeStyle="#000",e.beginPath();for(let o=1;o<3;o++)e.moveTo(d/3*o,0),e.lineTo(d/3*o,u);for(let o=1;o<3;o++)e.moveTo(0,u/3*o),e.lineTo(d,u/3*o);e.lineWidth=1,e.stroke(),e.closePath()}function y(e){e.clearRect(0,0,d,u),c.forEach(o=>{o.state="empty"}),f.fill(null),w(e)}function p(e){const o=document.querySelector(e);if(!o)throw new Error(`Element with id ${e} not found`);return o}function k(e){const o=[];for(let t=0;t<e;t++){const r=[];for(let s=0;s<e;s++)r.push(t*e+s);o.push(r)}for(let t=0;t<e;t++){const r=[];for(let s=0;s<e;s++)r.push(s*e+t);o.push(r)}const n=[];for(let t=0;t<e;t++)n.push(t*(e+1));o.push(n);const i=[];for(let t=1;t<=e;t++)i.push(t*(e-1));return o.push(i),o}function g(e,o){return b.find(i=>i.every(t=>e[t]===o))||null}function L(e,o){const[n,,i]=o,t=c[n].x+c[n].width/2,r=c[n].y+c[n].height/2,s=c[i].x+c[i].width/2,h=c[i].y+c[i].height/2;e.beginPath(),e.strokeStyle="red",e.lineWidth=5,e.moveTo(t,r),e.lineTo(s,h),e.stroke(),e.closePath()}document.querySelector("#app").innerHTML=`
<div id="app">
  <div class="game-container">
    <div class="controls">
      <input type="radio" id="x" name="xoro" value="X"/>
      <input type="radio" id="o" name="xoro" value="O"/>
    </div>
    <canvas id="tictactoe"></canvas>
  </div>
</div>
`;T();
