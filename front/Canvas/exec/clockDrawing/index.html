<canvas id="myCanvas1" width="400" height="400" style="width:400px;height:400px"></canvas>
<canvas id="myCanvas2" style="width:400px;height:400px"></canvas>
<script type="text/javascript">
  var ctx1 = myCanvas1.getContext('2d');
  var ctx2 = myCanvas2.getContext('2d');
  // 用canvas.style.width压缩canvas.width
  myCanvas2.width = parseInt(getComputedStyle(myCanvas2, null)['width']) * devicePixelRatio;
  myCanvas2.height = parseInt(getComputedStyle(myCanvas2, null)['height']) * devicePixelRatio;
  var img = new Image();
  img.src = './php.jpeg'
  img.onload = function () {
    this.onload = null;
    ctx1.drawImage(img, 0, 0);
    // 这里和ctx2 进行对比
    ctx1.drawImage(img, 0, 0, img.width / 2, img.height / 2);
    ctx2.drawImage(img, 0, 0);
  }
  ctx1.font = '32px Arial';
  // 压缩后，绘制需要同比放大
  ctx2.font = 32 * devicePixelRatio + 'px Arial';
  ctx1.fillText('未处理之前', 0, 350);
  ctx2.fillText('处理之后', 0, 350 * devicePixelRatio);
</script>